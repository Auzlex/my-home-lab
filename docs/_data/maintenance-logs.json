[
  {
    "date": "2026-01-21",
    "title": "Enforced Pi-hole DNS on All Nodes via Device Configuration",
    "status": "resolved",
    "category": "active",
    "problem_description": "Ensured ENLIL, LORIC, AUREL, and Casper Raspberry Pi nodes are using the ENLIL Pi-hole as their DNS server directly on the devices rather than relying on the router settings.",
    "diagnosis_steps": "1. Checked current DNS settings on all nodes:\n   <pre><code>nmcli device show</code></pre>\n\n2. Applied Pi-hole DNS directly to each connection profile using nmcli:\n   <pre><code>sudo nmcli connection modify <connection> ipv4.dns \"192.168.1.125\" ipv4.ignore-auto-dns yes && sudo nmcli connection up <connection></code></pre>\n\n3. Verified /etc/resolv.conf on each node reflected Pi-hole as primary DNS:\n   <pre><code>cat /etc/resolv.conf</code></pre>\n\n4. Confirmed all nodes resolved domains correctly and queries appeared in Pi-hole logs.",
    "follow_up_notes": [
      "Monitor Pi-hole query logs to ensure all devices consistently use it for DNS resolution.",
      "Document any new connection profiles that may appear to ensure they also point to Pi-hole.",
      "Verify Docker containers respect the device DNS settings for consistency."
    ]
  },
  {
    "date": "2026-01-19",
    "title": "Configured LORIC and AUREL to Use ENLIL Pi-hole DNS",
    "status": "resolved",
    "category": "active",
    "problem_description": "Changed the DNS resolving on Raspberry Pi nodes to target the ENLIL Pi-hole hosted on 192.168.1.125.",
    "diagnosis_steps": "1. Verified current network connections:\n   <pre><code>nmcli connection show</code></pre>\n\n2. Updated LORIC’s Wi-Fi connection to use Pi-hole:\n   <pre><code>sudo nmcli connection modify BT-RJATFG ipv4.dns \"192.168.1.125\" ipv4.ignore-auto-dns yes && sudo nmcli connection up BT-RJATFG && cat /etc/resolv.conf</code></pre>\n\n3. Noted that our home network is on BT, which prevents directly overriding DNS for all devices. Devices currently need to be manually pointed to the Pi-hole.\n\n4. Observed connection names:\n   - LORIC: BT-RJATFG\n   - AUREL: netplan-wlan0-BT-RJATFG (likely caused by LORIC losing Wi-Fi randomly; exact cause unknown)\n\n5. Checked Docker containers, which may ignore host DNS configuration:\n   <pre><code>docker run --rm alpine cat /etc/resolv.conf</code></pre>\n\nThis ensures that containers respect the Pi-hole DNS.\n\n6. Updated devices LORIC and AUREL to follow Pi-hole settings.",
    "follow_up_notes": [
      "Monitor DNS queries via Pi-hole to confirm proper resolution and fallback behavior.",
      "Consider applying similar DNS configuration to Casper node next.",
      "Watch for unexpected network drops that may cause new connection profiles like netplan-wlan0-BT-RJATFG.",
      "Document Docker container DNS behavior for future reference."
    ]
  },
  {
    "date": "2026-01-17",
    "title": "LORIC WiFi Connection Issue & Runner Offline",
    "status": "resolved",
    "category": "active",
    "problem_description": "LORIC (Raspberry Pi 3 B+ orchestration node) did not respond after a reboot. The device was unreachable over the network, and the Gitea runner service on it was offline.",
    "diagnosis_steps": "1. Connected Ethernet cable directly to LORIC to establish connectivity and investigate:\n   <pre><code>ip a</code></pre>\n\n2. Examined wireless interface status:\n   <pre><code>ifconfig wlan0</code></pre>\n\n<strong>Findings:</strong>\n- The Raspberry Pi had forgotten the WiFi SSID and had no active wireless connection.\n- Even after Ethernet connectivity was restored, the Gitea runner service failed to start due to DNS resolution issues.",
    "resolution": "1. Reconfigured WiFi settings using Raspberry Pi configuration tool:\n   <pre><code>sudo raspi-config</code></pre>\n   - Select <strong>System Options</strong> > <strong>Wireless LAN</strong>\n   - Enter correct SSID and passphrase\n   - Save and reboot\n\n2. Fixed local DNS resolution to allow the runner service to start:\n   <pre><code>sudo nano /etc/hosts</code></pre>\n   Added entries for all relevant nodes.\n\n3. Restarted Gitea runner:\n   <pre><code>sudo systemctl restart gitea-runner\nsudo systemctl status gitea-runner</code></pre>\n\nLORIC reconnected to the network and the runner service resumed normal operation.",
    "follow_up_notes": [
      "Keep an eye on LORIC’s WiFi over the next few days to make sure it stays stable.",
      "Make sure all Pi nodes have persistent DNS entries so the runner can always find what it needs.",
      "For critical services, consider keeping a backup Ethernet connection ready.",
      "Watch the runner logs for any future failures that might be network-related."
    ]
  },
  {
    "date": "2026-01-17",
    "title": "/etc/hosts File Resetting After Reboot",
    "status": "resolved",
    "category": "active",
    "problem_description": "The /etc/hosts file was being reset after system reboots, losing custom DNS resolutions including 192.168.1.124 entries.",
    "diagnosis_steps": "Investigated the cause of hosts file resetting:\n\n1. Checked cloud-init configuration:\n   <pre><code>cat /etc/cloud/cloud.cfg</code></pre>\n\n2. Examined hosts template file:\n   <pre><code>cat /etc/cloud/templates/hosts.debian.tmpl</code></pre>\n\n<strong>Findings:</strong> Cloud-init was managing /etc/hosts and overwriting custom entries on each boot.",
    "resolution": "Disabled cloud-init management of /etc/hosts and updated the template:\n\n1. Edited cloud-init configuration:\n   <pre><code>sudo nano /etc/cloud/cloud.cfg</code></pre>\n   Set: <code>manage_etc_hosts: false</code>\n\n2. Updated hosts template to include DNS resolution:\n   <pre><code>sudo nano /etc/cloud/templates/hosts.debian.tmpl</code></pre>\n\n\n3. Rebooted system to verify changes persist:\n   <pre><code>sudo reboot</code></pre>\n\nThe /etc/hosts file now retains custom entries across reboots.",
    "follow_up_notes": [
      "Double-check that 192.168.1.124 actually resolves after a reboot.",
      "Look at the other Pis to make sure they don’t have the same cloud-init issue.",
      "Keep a note of this fix for future setups so it doesn’t catch you off guard.",
      "Watch for any weird behavior from cloud-init in the coming weeks."
    ]
  },
  {
    "date": "2026-01-18",
    "title": "ENLIL Pi-hole Deployment and Initial Blocklist Tuning",
    "status": "resolved",
    "category": "active",
    "problem_description": "Deployment of Pi-hole on ENLIL (Raspberry Pi 1 Model B) as a dedicated network DNS and filtering node.",
    "diagnosis_steps": "Verified Pi-hole operation via web interface and query logs.\n\n<strong>Findings:</strong>\n- Pi-hole was successfully serving DNS requests.\n- Traffic was being filtered as expected with no immediate false positives observed.",
    "resolution": "1. Installed and configured Pi-hole on ENLIL.\n\n2. Added blocklists sourced from <a href=\"https://firebog.net/\" target=\"_blank\" rel=\"noopener\">Firebog</a>\n\n   - Selected two lists from each category:\n     * Suspicious Lists\n     * Advertising Lists\n     * Tracking and Telemetry Lists\n     * Malicious Lists\n\n3. Ran a manual Gravity update using the Pi-hole web interface.\n\n4. Added manual blocking for Facebook-related domains.\n\n5. Set upstream DNS provider to Cloudflare (temporary).",
    "metrics": {
      "total_domains_blocked": 261914,
      "total_queries": 6563,
      "blocked_queries": 1420,
      "percentage_blocked": "21.6%"
    },
    "follow_up_notes": [
      "Rule of thumb followed: fewer lists is better to reduce false positives.",
      "Continue monitoring query logs for breakage or over-blocking.",
      "Revisit upstream DNS choice later if needed.",
      "Gradually tune blocklists instead of adding more."
    ]
  }
]
